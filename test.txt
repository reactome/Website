I am trying to run a local environment of https://github.com/reactome/Website?tab=readme-ov-file# using docker containters

I have these files
Dockerfile
# Use an official PHP 5.6 Apache image as the base image
FROM php:5.6-apache

# Install required system dependencies for Apache, MySQL, and PHP extensions
RUN apt-get update && apt-get install -y \
    mysql-client \
    libmysqlclient-dev \
    vim \
    && docker-php-ext-install mysqli pdo pdo_mysql \
    && a2enmod rewrite \
    && apt-get clean

# Install git to clone the repository
RUN apt-get update && apt-get install -y git && apt-get clean

# Clone the Joomla Website repository into the container's Apache directory
RUN git clone https://github.com/reactome/Website.git /var/www/html/Website

# Set file permissions for the Joomla Website files
RUN chown -R www-data:www-data /var/www/html/Website

# Copy configuration.php file template to the Joomla website folder
COPY configuration.php /var/www/html/Website/configuration.php

# Expose port 80 for the web server
EXPOSE 80

# Start Apache service
CMD ["apache2-foreground"]

docker-compose.yml
services:
  apache:
    build: .
    ports:
      - "8080:80"
    volumes:
      - ./Website:/var/www/html/Website
    depends_on:
      - db

  db:
    image: mysql:5.5
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: website
    volumes:
      - db_data:/var/lib/mysql
      - 

volumes:
  db_data:


000-default.conf
<VirtualHost *:80>
    DocumentRoot /var/www/html/Website
    <Directory /var/www/html/Website>
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

configuration.php
<?php
class JConfig {
  public $offline = '0';
  public $offline_message = 'This site is down for maintenance.<br />Please check back again soon.';
  public $display_offline_message = '1';
  public $offline_image = '';
  public $sitename = 'Reactome Pathway Database';
  public $editor = 'jce';
  public $captcha = '0';
  public $list_limit = '20';
  public $access = '1';
  public $debug = '0';
  public $debug_lang = '0';
  public $dbtype = 'mysqli';
  public $host = 'db';  // This is the service name for MySQL container
  public $user = 'root';
  public $password = 'root';
  public $db = 'website';
  public $dbprefix = 'rlp_';
  public $live_site = '';
  public $secret = 'joomla_secret';
  public $gzip = '0';
  public $error_reporting = 'default';
  public $helpurl = 'https://help.joomla.org/proxy?keyref=Help{major}{minor}:{keyref}&lang={langcode}';
  public $ftp_host = '';
  public $ftp_port = '';
  public $ftp_user = '';
  public $ftp_pass = '';
  public $ftp_root = '';
  public $ftp_enable = '0';
  public $offset = 'America/Toronto';
  public $mailonline = '1';
  public $mailer = 'mail';
  public $mailfrom = 'yourmail@yourdomain.com';
  public $fromname = 'Reactome';
  public $sendmail = '/usr/sbin/sendmail';
  public $smtpauth = '0';
  public $smtpuser = '';
  public $smtppass = '';
  public $smtphost = 'localhost';
  public $smtpsecure = 'none';
  public $smtpport = '25';
  public $caching = '0';
  public $cache_handler = 'file';
  public $cachetime = '15';
  public $cache_platformprefix = '0';
  public $MetaDesc = 'Reactome is pathway database which provides intuitive bioinformatics tools for the visualisation, interpretation and analysis of pathway knowledge.';
  public $MetaKeys = 'pathway,reactions,graph,bioinformatics';
  public $MetaTitle = '1';
  public $MetaAuthor = '0';
  public $MetaVersion = '0';
  public $robots = '';
  public $sef = '1';
  public $sef_rewrite = '1';
  public $sef_suffix = '0';
  public $unicodeslugs = '0';
  public $feed_limit = '10';
  public $feed_email = 'none';
  public $log_path = '/var/www/html/Website/administrator/logs';
  public $tmp_path = '/var/www/html/Website/tmp';
  public $lifetime = '45';
  public $session_handler = 'database';
  public $memcache_persist = '1';
  public $memcache_compress = '0';
  public $memcache_server_host = 'localhost';
  public $memcache_server_port = '11211';
  public $memcached_persist = '1';
  public $memcached_compress = '0';
  public $memcached_server_host = 'localhost';
  public $memcached_server_port = '11211';
  public $redis_persist = '1';
  public $redis_server_host = 'localhost';
  public $redis_server_port = '6379';
  public $redis_server_auth = '';
  public $redis_server_db = '0';
  public $proxy_enable = '0';
  public $proxy_host = '';
  public $proxy_port = '';
  public $proxy_user = '';
  public $proxy_pass = '';
  public $massmailoff = '0';
  public $MetaRights = '';
  public $sitename_pagetitles = '2';
  public $force_ssl = '0';
  public $session_memcache_server_host = 'localhost';
  public $session_memcache_server_port = '11211';
  public $session_memcached_server_host = 'localhost';
  public $session_memcached_server_port = '11211';
  public $frontediting = '1';
  public $cookie_domain = '';
  public $cookie_path = '';
  public $asset_id = '1';
  public $replyto = '';
  public $replytoname = '';
  public $shared_session = '0';
  public $session_redis_server_host = 'localhost';
  public $session_redis_server_port = '6379';
  public $show_notice_mod = '0';
  public $ga_tracking_code = 'UA-1';
}


.htaccess
##
# @package    Joomla
# @copyright  Copyright (C) 2005 - 2017 Open Source Matters. All rights reserved.
# @license    GNU General Public License version 2 or later; see LICENSE.txt
##

##
# READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE!
#
# The line 'Options +FollowSymLinks' may cause problems with some server configurations.
# It is required for the use of mod_rewrite, but it may have already been set by your 
# server administrator in a way that disallows changing it in this .htaccess file.
# If using it causes your site to produce an error, comment it out (add # to the 
# beginning of the line), reload your site in your browser and test your sef urls. If 
# they work, then it has been set by your server administrator and you do not need to 
# set it here.
##

## No directory listings
<IfModule autoindex>
  IndexIgnore *
</IfModule>

## Can be commented out if causes errors, see notes above.
Options +FollowSymlinks
Options -Indexes

## Mod_rewrite in use.

RewriteEngine On

# WP REST API BLOCK JSON REQUESTS
# Block/Forbid Requests to: /wp-json/
RewriteCond %{REQUEST_URI} ^.*wp-json/ [NC]
RewriteRule ^(.*)$ - [F]

#After trying to enable HTTPS by default in the entire site using JOOMLA! interface
#it failed, so the following two lines do that
RewriteCond %{HTTPS} off
# RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,NC,L]

#Remove the www. from the URL - Only in PROD
#RewriteCond %{HTTP_HOST} ^www.reactome.org
#RewriteRule (.*) https://reactome.org/$1 [R=301,L]

## Begin - Rewrite rules to block out some common exploits.
# If you experience problems on your site then comment out the operations listed 
# below by adding a # to the beginning of the line.
# This attempts to block the most common type of exploit `attempts` on Joomla!
#
# Block any script trying to base64_encode data within the URL.
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
# Block any script that includes a <script> tag in URL.
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block any script trying to set a PHP GLOBALS variable via URL.
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block any script trying to modify a _REQUEST variable via URL.
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root home page
RewriteRule .* index.php [F]
#
## End - Rewrite rules to block out some common exploits.

## Begin - Custom redirects
#
# If you need to redirect some pages, or set a canonical non-www to
# www redirect (or vice versa), place that code here. Ensure those
# redirects use the correct RewriteRule syntax and the [R=301,L] flags.

Redirect 301 /pages/about/reactome /what-is-reactome
Redirect 301 /pages/about/news /about/news
Redirect 301 /pages/about/reactome-team /about/team
Redirect 301 /pages/about/reactome-scientific-advisory-board /sab
Redirect 301 /pages/about/license-agreement /license
Redirect 301 /pages/about/reactome-disclaimer /about/disclaimer
Redirect 301 /pages/about /what-is-reactome

Redirect 301 /stats.html /about/statistics

Redirect 301 /pages/content/orcid-integration-project /orcid

Redirect 301 /pages/documentation/developer-guide/graph-database/tutorial-participating-molecules /dev/graph-database/extract-participating-molecules
Redirect 301 /pages/documentation/developer-guide/diagram/diagram-js /dev/diagram/js
Redirect 301 /pages/documentation/developer-guide/diagram/diagram-gwt /dev/diagram/gwt
Redirect 301 /pages/documentation/developer-guide/pathways-overview/fireworks-js /dev/pathways-overview/js
Redirect 301 /pages/documentation/developer-guide/pathways-overview/fireworks-gwt /dev/pathways-overview/gwt
Redirect 301 /pages/documentation/developer-guide/analysis-service /dev/analysis
Redirect 301 /pages/documentation/developer-guide/content-service /dev/content-service
Redirect 301 /pages/documentation/developer-guide/graph-database /dev/graph-database
Redirect 301 /pages/documentation/developer-guide/diagram /dev/diagram
Redirect 301 /pages/documentation/developer-guide/pathways-overview /dev/pathways-overview
Redirect 301 /pages/documentation/developer-guide/partners /community/partners

Redirect 301 /pages/documentation/data-model /documentation/data-model
Redirect 301 /pages/documentation/electronically-inferred-events /documentation/inferred-events
Redirect 301 /electronic_inference.html /documentation/inferred-events
Redirect 301 /electronic_inference_compara.html /documentation/inferred-events
Redirect 301 /pages/documentation/linking-to-reactome /linking-to-us
Redirect 301 /pages/documentation/linking-to-reactome/list-of-identifiers /linking-to-us/identifiers
Redirect 301 /pages/documentation/citing-reactome-publications /cite
Redirect 301 /pages/documentation/developer-guide /dev
Redirect 301 /pages/documentation /documentation

Redirect 301 /pages/community/outreach /community/outreach
Redirect 301 /pages/community/reactome-events /community/events
Redirect 301 /pages/community/reactome-publications /community/publications
Redirect 301 /pages/community/training /community/training
Redirect 301 /pages/download-data /download-data

Redirect 301 /download/tools/curatorTool/install.htm /download-data/reactome-curator-tool
Redirect 301 /user/reactome-fiviz /tools/reactome-fiviz

Redirect 302 /user/guide /userguide

# Used in PAPERS
Redirect 301 /tutorials/pwp https://youtu.be/-skixrvI4nU
Redirect 301 /documentation/index.php/Glossary_Data_Model /documentation/data-model
#Redirect 301 /cgi-bin/classbrowser /content/schema

# Redirect eventbrowser to content/detail
RewriteCond %{REQUEST_URI}  ^/cgi-bin/eventbrowser*$
RewriteCond %{QUERY_STRING} ^ST_ID=((R-[A-Z]{3}-[0-9].*)|(REACT_\d+.*))$
RewriteRule ^(.*)$ /content/detail/%1? [R=301,L]

RewriteCond %{REQUEST_URI}  ^/cgi-bin/eventbrowser_st_id*$
RewriteCond %{QUERY_STRING} ^ST_ID=((R-[A-Z]{3}-[0-9].*)|(REACT_\d+.*))$
RewriteRule ^(.*)$ /content/detail/%1? [R=301,L]

# Redirect author_contributions to /content/detail/person
RewriteCond %{REQUEST_URI}  ^/cgi-bin/author_contributions*$
RewriteCond %{QUERY_STRING} ^DB=(.*)&ID=([0-9]*)\&?$
RewriteRule ^(.*)$ /content/detail/person/%2? [R=301,L]

RewriteCond %{REQUEST_URI}  ^/cgi-bin/author_contributions*$
RewriteCond %{QUERY_STRING} ^ID=([0-9]*)$
RewriteRule ^(.*)$ /content/detail/person/%1? [R=301,L]

# Redirect doi/toc old cgis to /content/doi /content/toc
RewriteCond %{REQUEST_URI}  ^/cgi-bin/doi_toc*$
RewriteCond %{QUERY_STRING} ^DB=(.*)$
RewriteRule ^(.*)$ /content/doi? [R=301,L]

RewriteCond %{REQUEST_URI}  ^/cgi-bin/toc*$
RewriteCond %{QUERY_STRING} ^DB=(.*)$
RewriteRule ^(.*)$ /content/toc? [R=301,L]

# Forbidding any url access for the user login component
RewriteRule index.php/staff index.php [F]
RewriteRule index.php/component/users index.php [F]
#RewriteRule component/users index.php [F]

#RewriteCond %{QUERY_STRING} (^|&)option=com_users(&|$)
#RewriteRule ^(.*) - [F]

# Servers only
#Redirect 301 /staff  /
#Redirect 301 /administrator  /

## End - Custom redirects

##
# Uncomment the following line if your webserver's URL
# is not directly related to physical file paths.
# Update Your Joomla! Directory (just / for root).
##
# RewriteBase /

## Begin - Joomla! core SEF Section.
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index\.php
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
## End - Joomla! core SEF Section.

# Enable PHP Logs - uncomment the following to DEBUG php.
# Comment once the issue is addressed.
#php_flag display_errors on


and the following requirements
[<img src=https://user-images.githubusercontent.com/6883670/31999264-976dfb86-b98a-11e7-9432-0316345a72ea.png height=75 />](https://reactome.org)

# Website

## Introduction
Weâ€™ve launched our new website fully responsive and based in Joomla CMS! The new website has been designed to provide the ultimate user-friendly experience with improved navigation and functionality throughout.
In this repository, we're going to describe how to install and configure this website to be included in a container or in your local environment.

<img width="521" alt="responsive_reactome" src="https://user-images.githubusercontent.com/6883670/35038860-051fcdfa-fb74-11e7-99ee-9ce5114b5989.png" style="align: center;">

## Pre-requirements

#### Server
  1. Apache HTTP Server 2.4.10 (https://httpd.apache.org/)
  2. MySQL 5.5.55
  3. PHP 5.6.30

Please visit this [page](https://downloads.joomla.org/technical-requirements) in order to get a full detailed requirements

#### Local Environments
  Any software bundle
  1. [MAMP](https://www.mamp.info/en/) for macOS
  2. [LAMP](https://bitnami.com/stack/lamp/installer) for Linux or
  3. [XAMPP](https://www.apachefriends.org/index.html) for Cross-Platform

* Instructions will be given on Unix-based OS

## Getting started

1. Locate the htdocs folder or the DocumentRoot already configured in your HTTP Server.
2. Clone this repository and navigate to Website folder

```console
git clone https://github.com/reactome/Website.git
```
:warning: For security and privacy issues our Joomla Website Database and Joomla configuration.php are not available for public use. Please use the given configuration.php provided below and a clean database could be found in database/joomla_website_public.sql. Do not use this database in a production/public environment.

## MySQL Database

#### Creating database

```console
mysql -u <user> -p<password> -e "CREATE DATABASE website DEFAULT CHARACTER SET utf8;"
```

#### Importing database

```console
mysql -u <user> -p<password> website < database/joomla_website_public.sql
```

## Setting up configuration.php

```configuration.php``` is located in <XAMPP_HOME>/htdocs/Website/configuration.php. Due to privacy issues you won't find this file and you may need to create it manually.

```console
$> cd <XAMPP_HOME>/htdocs/Website/
$> vi configuration.php
```
...and copy and paste the content below

```php
<?php
class JConfig {
  public $offline = '0';
  public $offline_message = 'This site is down for maintenance.<br />Please check back again soon.';
  public $display_offline_message = '1';
  public $offline_image = '';
  public $sitename = 'Reactome Pathway Database';
  public $editor = 'jce';
  public $captcha = '0';
  public $list_limit = '20';
  public $access = '1';
  public $debug = '0';
  public $debug_lang = '0';
  public $dbtype = 'mysqli';
  public $host = 'localhost';
  public $user = 'root';
  public $password = 'root';
  public $db = 'website';
  public $dbprefix = 'rlp_';
  public $live_site = '';
  public $secret = 'joomla_secret';
  public $gzip = '0';
  public $error_reporting = 'default';
  public $helpurl = 'https://help.joomla.org/proxy?keyref=Help{major}{minor}:{keyref}&lang={langcode}';
  public $ftp_host = '';
  public $ftp_port = '';
  public $ftp_user = '';
  public $ftp_pass = '';
  public $ftp_root = '';
  public $ftp_enable = '0';
  public $offset = 'America/Toronto';
  public $mailonline = '1';
  public $mailer = 'mail';
  public $mailfrom = 'yourmail@yourdomain.com';
  public $fromname = 'Reactome';
  public $sendmail = '/usr/sbin/sendmail';
  public $smtpauth = '0';
  public $smtpuser = '';
  public $smtppass = '';
  public $smtphost = 'localhost';
  public $smtpsecure = 'none';
  public $smtpport = '25';
  public $caching = '0';
  public $cache_handler = 'file';
  public $cachetime = '15';
  public $cache_platformprefix = '0';
  public $MetaDesc = 'Reactome is pathway database which provides intuitive bioinformatics tools for the visualisation, interpretation and analysis of pathway knowledge.';
  public $MetaKeys = 'pathway,reactions,graph,bioinformatics';
  public $MetaTitle = '1';
  public $MetaAuthor = '0';
  public $MetaVersion = '0';
  public $robots = '';
  public $sef = '1';
  public $sef_rewrite = '1';
  public $sef_suffix = '0';
  public $unicodeslugs = '0';
  public $feed_limit = '10';
  public $feed_email = 'none';
  public $log_path = '<XAMPP_HOME>/htdocs/Website/administrator/logs';
  public $tmp_path = '<XAMPP_HOME>/htdocs/Website/tmp';
  public $lifetime = '45';
  public $session_handler = 'database';
  public $memcache_persist = '1';
  public $memcache_compress = '0';
  public $memcache_server_host = 'localhost';
  public $memcache_server_port = '11211';
  public $memcached_persist = '1';
  public $memcached_compress = '0';
  public $memcached_server_host = 'localhost';
  public $memcached_server_port = '11211';
  public $redis_persist = '1';
  public $redis_server_host = 'localhost';
  public $redis_server_port = '6379';
  public $redis_server_auth = '';
  public $redis_server_db = '0';
  public $proxy_enable = '0';
  public $proxy_host = '';
  public $proxy_port = '';
  public $proxy_user = '';
  public $proxy_pass = '';
  public $massmailoff = '0';
  public $MetaRights = '';
  public $sitename_pagetitles = '2';
  public $force_ssl = '0';
  public $session_memcache_server_host = 'localhost';
  public $session_memcache_server_port = '11211';
  public $session_memcached_server_host = 'localhost';
  public $session_memcached_server_port = '11211';
  public $frontediting = '1';
  public $cookie_domain = '';
  public $cookie_path = '';
  public $asset_id = '1';
  public $replyto = '';
  public $replytoname = '';
  public $shared_session = '0';
  public $session_redis_server_host = 'localhost';
  public $session_redis_server_port = '6379';
  public $show_notice_mod = '0';
  public $ga_tracking_code = 'UA-1';
}
```

...set your database credentials and/or database name, if needed

```console
public $user = 'root';
public $password = 'root';
public $db = 'website';
```

...set administrator mail address

```console
public $mailfrom = 'yourmail@yourdomain.com';
```

...set <XAMPP_HOME> for the log_path and tmp_path. In general, it is the absolute path where the Website resides.

```console
public $log_path = '<XAMPP_HOME>/htdocs/Website/administrator/logs';
public $tmp_path = '<XAMPP_HOME>/htdocs/Website/tmp';
```

...last, once everything is set, please change the ```configuration.php``` file permissions
```console
# file has to be read-only
chmod 444 configuration.php
```

More detailed explanation of every variable in this configuration file can be found [here](https://unihost.com/help/joomla-configuration-php-file/)

:warning: If you need to edit it, make a backup copy. And do not change default values, unless you know what you are doing.

## Setting up .htaccess

In our live website, we force all the requests to be over SSL connection (https) and this configuration is done in the ```<XAMPP_HOME>/htdocs/Website/.htaccess```. To disable SSL, please follow these steps:

```console
cd <XAMPP_HOME>/htdocs/Website
vi .htaccess
```

and comment out the following line

```console
# RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,NC,L]
```

## Starting up the services

MAMP - https://www.mamp.info/en/#controlcenter

XAMPP - https://www.apachefriends.org/faq_linux.html

## Testing the Website

Each software bundle starts using a different port, e.g XAMPP uses port 80 and MAMP uses port 8888 by default

Accessing ```http://localhost/Website``` you should see
![Reactome Website](https://user-images.githubusercontent.com/6883670/35101682-4d891a9e-fc58-11e7-89da-06cac5628ac0.png)

## Available accounts

In order to access [Administrator area](http://localhost/Website/administrator) an account is need to log in.

```console
user:     admin
password: Not2$hare
```

Also, front-end editing is available in the [Staff area](http://localhost/Website/administrator), again, username, emails and passwords were removed.

```console
user:     unknown162
password: @Dock3r999
```

## Troubleshooting

1. I went through all the steps, but my website doesn't work and it only shows ```Error```
![Website doesn't work](https://user-images.githubusercontent.com/6883670/35103014-90900326-fc5c-11e7-91cc-649397d69aca.png)

**Reason**: Joomla can't access the database

**Potential Solution**:
  - Check MySQL user and password
  - Check if the database has been created
  - Check if the tables are there and their prefix is rlp_
  - Double check those values in the configuration.php
  ```console
    public $user = 'root';
    public $password = 'root';
    public $db = 'website';
    public $dbprefix = 'rlp_';
  ```

2. Enable PHP debug
```console
vi <XAMPP_HOME>/htdocs/Website/.htaccess
Locate and uncomment the following line #php_flag display_errors on
Restart apache
```
Now, the website will print more descriptive error. Then, Google the error and fix it.
Comment the php_flag once the error is addressed.

3. SimpleXML is disabled in PHP7 -> sudo apt-get install php7.0-xml

4. Apache Modules
```console
 sudo a2enmod rewrite
 sudo a2enmod headers
 sudo a2enmod include
 sudo a2enmod proxy
 sudo a2enmod proxy_http
```

how do I get the local env started while setting up the db as a volume to import automatically in docker-compose.yml